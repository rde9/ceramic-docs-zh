<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-run/nodes">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<title data-rh="true">在生产环境运行节点 | Ceramic 开发者文档</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rde9.github.io//ceramic-docs-zh/run/nodes/"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="在生产环境运行节点 | Ceramic 开发者文档"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/ceramic-docs-zh/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rde9.github.io//ceramic-docs-zh/run/nodes/"><link data-rh="true" rel="alternate" href="https://rde9.github.io//ceramic-docs-zh/run/nodes/" hreflang="zh"><link data-rh="true" rel="alternate" href="https://rde9.github.io//ceramic-docs-zh/run/nodes/" hreflang="x-default"><link rel="stylesheet" href="/ceramic-docs-zh/assets/css/styles.50a375b1.css">
<link rel="preload" href="/ceramic-docs-zh/assets/js/runtime~main.fac2329c.js" as="script">
<link rel="preload" href="/ceramic-docs-zh/assets/js/main.53676837.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ceramic-docs-zh/"><div class="navbar__logo"><img src="/ceramic-docs-zh/img/ceramic-icon.png" alt="Ceramic Icon" class="themedImage_ToTc themedImage--light_HNdA"><img src="/ceramic-docs-zh/img/ceramic-icon.png" alt="Ceramic Icon" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Ceramic 开发者文档</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ceramicnetwork/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">原始仓库<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/rde9/ceramic-docs-zh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">翻译仓库<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ceramic-docs-zh/category/学习基础知识/">学习基础知识</a><button aria-label="打开/收起侧边栏菜单「学习基础知识」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/ceramic-docs-zh/category/运行节点/">运行节点</a><button aria-label="打开/收起侧边栏菜单「运行节点」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ceramic-docs-zh/run/">运行节点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ceramic-docs-zh/run/networks/">网络</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ceramic-docs-zh/run/available/">可用的 Ceramic 节点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ceramic-docs-zh/run/installation/">在开发环境运行节点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ceramic-docs-zh/run/nodes/">在生产环境运行节点</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ceramic-docs-zh/category/博客文章翻译/">博客文章翻译</a><button aria-label="打开/收起侧边栏菜单「博客文章翻译」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/ceramic-docs-zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ceramic-docs-zh/category/运行节点/"><span itemprop="name">运行节点</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">在生产环境运行节点</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>在生产环境中运行 Ceramic</h1><hr><p>本指南提供了启动连接良好、生产就绪的 Ceramic 节点的完整说明和各种工具。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="谁应该运行-cearmic-节点"><strong>谁应该运行 Cearmic 节点？</strong><a class="hash-link" href="#谁应该运行-cearmic-节点" title="标题的直接链接">​</a></h2><hr><p>此时，任何希望部署到 <code>mainnet</code> 的应用程序都需要运行他们自己的生产就绪的节点。此外，在 <code>testnet-clay</code> 上构建的开发者可能希望运行他们自己的节点，这样他们就不需要依赖<a href="/ceramic-docs-zh/run/available/">社区托管</a>的节点，这些节点可能不稳定和/或不时擦除数据。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="需要知道的事情"><strong>需要知道的事情</strong><a class="hash-link" href="#需要知道的事情" title="标题的直接链接">​</a></h2><hr><p><strong>Ceramic 网络</strong> – 目前有三个 Ceramic 网络: <code>mainnet</code>, <code>testnet-clay</code> 和 <code>dev-unstable</code>. 在 <a href="/ceramic-docs-zh/run/networks/">此处</a> 了解各个网络的更多详情. 默认情况下，Ceramic 将连接到 <code>testnet-clay</code> 和一个运行在 Ethereum Ropsten 上的 <a href="https://github.com/ceramicnetwork/ceramic-anchor-service" target="_blank" rel="noopener noreferrer">Ceramic 锚点服务 (Ceramic Anchor Service)</a>。当您准备好进入主网时，请在 <a href="https://chat.ceramic.network" target="_blank" rel="noopener noreferrer">Ceramic Discord →</a> 上联系我们以获得我们的 <code>mainnet</code> 锚点服务。</p><p><strong>运行 IPFS</strong> – Ceramic 依靠一个叫做 <a href="https://docs.ipfs.io/" target="_blank" rel="noopener noreferrer">IPFS</a> 的系统来连接和共享 Ceramic 网络中的数据。在 Ceramic 节点自身之外，IPFS 作为一个独立的进程运行，每个 Ceramic 节点通过 HTTP 连接到一个专门的 IPFS 节点。Ceramic 守护进程可以自动启动一个 IPFS 进程（在 Ceramic 配置文件中被称为以 &quot;捆绑 (bundled)&quot; 模式运行 ipfs），这只为测试和本地开发而设计。对于生产部署，你应该手动运行你自己的 IPFS 进程，并将你的 Ceramic 节点指向它（在 Ceramic 配置文件中被称为在 &quot;远程 (remote)&quot; 模式下运行 ipfs）。 这允许为你的 IPFS 节点提供更多配置选项，从而实现更受控制的资源分配，以及改进的维护、调试和可观察性。请注意，Ceramic 仅支持 <code>go-ipfs</code> 0.12 或更高版本。</p><p>本指南的其余部分假设你在&quot;远程 (remote)&quot;模式下运行 Ceramic 和 IPFS。</p><p><strong>进程管理、重启和数据持久性</strong> – Ceramic 和 IPFS 在崩溃时不会自动重启。您应该配置您自己的重启机制，而且必须确保重启之间的数据持久性。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="所需步骤"><strong>所需步骤</strong><a class="hash-link" href="#所需步骤" title="标题的直接链接">​</a></h2><hr><p>以下是在生产环境中运行 Ceramic 节点所需的步骤。本指南将教你如何：</p><ol><li><a href="#running-the-daemon">安装和启动 Ceramic 守护进程</a></li><li><a href="#data-persistence">配置数据持久性</a></li><li><a href="#get-connected-to-the-network">连接网络</a></li><li><a href="#observability">从你的节点获取监测数据（可选）</a></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速开始"><strong>快速开始</strong><a class="hash-link" href="#快速开始" title="标题的直接链接">​</a></h2><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在-aws-ecs-上使用-terraform-运行-ceramic-"><a href="https://github.com/ceramicnetwork/terraform-aws-ceramic" target="_blank" rel="noopener noreferrer"><strong>在 AWS ECS 上使用 Terraform 运行 Ceramic →</strong></a><a class="hash-link" href="#在-aws-ecs-上使用-terraform-运行-ceramic-" title="标题的直接链接">​</a></h3><p>3Box Labs 团队编写了一个 <a href="https://github.com/ceramicnetwork/terraform-aws-ceramic" target="_blank" rel="noopener noreferrer">Terraform 模块</a>，该模块使用 Fargate 在 AWS ECS 中配置 Ceramic 和 IPFS。使用此模块是在云中运行 Ceramic 的一种快速可靠的方法，因为它是为数据持久性和自动重启而设置的。该模块目前需要预先配置一些常见的 AWS 资源以及 Cloudflare。请参阅一个<a href="https://github.com/ceramicnetwork/terraform-aws-ceramic/blob/main/examples/ecs/main.tf" target="_blank" rel="noopener noreferrer">正在使用的模块示例</a>。</p><blockquote><p>我们非常鼓励社区为不同的基础设施供应商创建 Terraform 模块或其他模板，以进一步促进 Ceramic 网络的去中心化。</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="运行守护进程"><strong>运行守护进程</strong><a class="hash-link" href="#运行守护进程" title="标题的直接链接">​</a></h2><hr><p><a href="https://github.com/ceramicnetwork/js-ceramic" target="_blank" rel="noopener noreferrer">js-ceramic</a> 节点使用 Node.js 或 Docker 以守护进程形式运行。</p><p>默认情况下，Ceramic 守护程序与 go-ipfs 节点捆绑运行，并连接到 Clay 测试网和 Ethereum Ropsten <a href="https://github.com/ceramicnetwork/ceramic-anchor-service" target="_blank" rel="noopener noreferrer">Ceramic 锚点服务</a>。在生产中，你应该更改这些默认值以保护你的数据并适应你的基础设施设置。</p><p>Ceramic 守护进程可以用一个 JSON 文件来配置，该文件在启动时创建，默认位于 <code>$HOME/.ceramic/daemon.config.json</code>（你也可以在启动 Ceramic 守护进程时使用 <code>--config</code> 标记将配置文件指向自定义位置）。见下面 <code>daemon.config.json</code> 的例子。配置选项可以在 <a href="https://developers.ceramic.network/reference/typescript/classes/_ceramicnetwork_cli.daemonconfig-1.html" target="_blank" rel="noopener noreferrer">DaemonConfig 类的参考文档</a>中查看。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在-docker-容器中运行"><strong>在 Docker 容器中运行</strong><a class="hash-link" href="#在-docker-容器中运行" title="标题的直接链接">​</a></h3><p>运行 Ceramic 和 IPFS 的 Docker 镜像分别由 <a href="https://github.com/ceramicnetwork/js-ceramic" target="_blank" rel="noopener noreferrer">js-ceramic</a> 和 <a href="https://github.com/ceramicnetwork/go-ipfs-daemon" target="_blank" rel="noopener noreferrer">go-ipfs-daemon</a> 仓库的源代码构建。从主分支构建的镜像被标注 <code>latest</code> 和构建该镜像的 git 提交哈希。你可以<a href="https://hub.docker.com/r/ceramicnetwork/js-ceramic" target="_blank" rel="noopener noreferrer">在 DockerHub 上查看 js-ceramic 的镜像构建情况</a>。<code>go-ipfs-daemon</code> 的 Docker 镜像使用插件预先配置了 IPFS，使其易于在云基础设施上运行。你可以<a href="https://hub.docker.com/r/ceramicnetwork/go-ipfs-daemon" target="_blank" rel="noopener noreferrer">在 DockerHub 上查看 go-ipfs-daemon 的镜像构建情况</a>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在容器外运行"><strong>在容器外运行</strong><a class="hash-link" href="#在容器外运行" title="标题的直接链接">​</a></h3><p>如果你想在容器外或在裸金属服务器上运行 Ceramic 和 IPFS，请首先安装 <a href="https://github.com/ipfs/go-ipfs" target="_blank" rel="noopener noreferrer">go-ipfs</a>（<strong>0.12 或更高版本</strong>）。根据你的基础架构设置，你可以考虑使用<a href="https://github.com/ceramicnetwork/go-ipfs-healthcheck" target="_blank" rel="noopener noreferrer">健康检查插件</a>和 <a href="https://github.com/3box/go-ds-s3" target="_blank" rel="noopener noreferrer">S3 数据存储插件</a>构建 go-ipfs。IPFS 安装完毕后，配置它使用 pubsub，Ceramic 依靠它进行消息传递。这可以通过运行 IPFS 守护进程时添加 <code>--enable-pubsub-experiment</code> 标志来完成，或者通过运行 <code>ipfs config --json Pubsub.Enabled true</code> 来修改配置（在 <a href="https://github.com/ipfs/go-ipfs/blob/master/docs/experimental-features.md#ipfs-pubsub" target="_blank" rel="noopener noreferrer">IPFS 文档</a>中了解更多）。接下来你可以运行 IPFS，用 <a href="https://www.npmjs.com/package/@ceramicnetwork/cli" target="_blank" rel="noopener noreferrer">js-ceramic CLI</a> 安装 Ceramic 守护进程，它作为一个公共的 NPM 模块可用。目前它与 <strong>Node.js 14 和 16 版本</strong>兼容。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据持久性"><strong>数据持久性</strong><a class="hash-link" href="#数据持久性" title="标题的直接链接">​</a></h2><p>要在生产环境中运行 Ceramic 节点，维持 <a href="https://developers.ceramic.network/run/nodes/nodes/#ceramic-state-store" target="_blank" rel="noopener noreferrer">Cearmic 状态存储 (state store)</a> 和 <a href="https://github.com/ipfs/go-ipfs/blob/master/docs/config.md#datastorespec" target="_blank" rel="noopener noreferrer">IPFS 数据存储 (datastore)</a> 的持久存在至关重要。你选择的存储形式还应配置为具有数据冗余的灾难恢复以及某种形式的快照和/或备份。</p><p><strong>这些数据的丢失可能会导致 Ceramic 流的永久丢失，并将导致你的节点处于损坏状态。</strong></p><p>Ceramic 状态存储和 IPFS 数据存储默认存储在你机器的文件系统中。Ceramic 状态存储默认为 <code>$HOME/.ceramic/statestore</code>。IPFS 数据存储默认为 <code>ipfs/blocks</code>，位于你运行 IPFS 的地方。</p><p>确保数据持久性的最快方法是给你的实例挂载一个持久卷，并配置 Ceramic 和 IPFS 节点来写入挂载的位置。挂载的卷应该被配置成在实例关闭时数据仍然存在。</p><p>你还可以将 AWS S3 用于数据存储，它对 Ceramic 和 IPFS 均支持。下面列出了这两种存储选项的配置示例。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ipfs-数据存储-ipfs-datastore">IPFS 数据存储 (IPFS Datastore)<a class="hash-link" href="#ipfs-数据存储-ipfs-datastore" title="标题的直接链接">​</a></h4><p>IPFS 数据存储存储了构成 Ceramic 流的原始 IPFS 块。为防止数据损坏，请使用写在配置文件中的环境变量，或者在启动时注入环境中，这样数据存储的位置在重启时就不会改变。</p><p>注意：切换数据存储位置是一项高级功能，应避免使用。根据分片的实现，你可能需要先进行数据迁移。更多信息请参考 <a href="https://github.com/ipfs/go-ipfs/blob/master/docs/config.md#datastorespec%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/ipfs/go-ipfs/blob/master/docs/config.md#datastorespec。</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ceramic-状态存储-ceramic-state-store">Ceramic 状态存储 (Ceramic State Store)<a class="hash-link" href="#ceramic-状态存储-ceramic-state-store" title="标题的直接链接">​</a></h4><p>Ceramic 状态存储为钉住 (pinned) 的流保存状态，并作为你的节点创建或加载的 Ceramic 流的一个缓存。为了确保使用 Ceramic 节点创建的数据不会丢失，你必须钉住你关心的数据流，并且必须确保状态存储不会被删除。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例"><strong>示例</strong><a class="hash-link" href="#示例" title="标题的直接链接">​</a></h2><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-docker-容器"><strong>使用 Docker 容器</strong><a class="hash-link" href="#使用-docker-容器" title="标题的直接链接">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull ceramicnetwork/go-ipfs-daemon:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用这段代码让数据存储保持在卷中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">5001</span><span class="token plain">:5001 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># API port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">8011</span><span class="token plain">:8011 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Healthcheck port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_on_volume_for_ipfs_repo:/data/ipfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name ipfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  go-ipfs-daemon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用这段代码让数据存储保持在 S3 中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">5001</span><span class="token plain">:5001 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># API port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">8011</span><span class="token plain">:8011 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Healthcheck port</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_on_volume_for_ipfs_repo:/data/ipfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_ENABLE_S3</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_S3_REGION</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">region </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_S3_BUCKET_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">bucket_name </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_S3_ROOT_DIRECTORY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">root_directory </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_S3_ACCESS_KEY_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">aws_access_key_id </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_S3_SECRET_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">aws_secret_access_key </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">IPFS_S3_KEY_TRANSFORM</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">next-to-last/2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Sharding method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name ipfs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  go-ipfs-daemon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 获取 IP 地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> inspect -f </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ipfs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在启动 Ceramic 守护进程前，先配置其使用 IPFS &quot;远程&quot; 模式。 请参考下方的 <a href="#example-daemonconfigjson">示例 daemon.config.json</a>。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> pull ceramicnetwork/js-ceramic:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用这段代码让状态存储保持在卷中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">7007</span><span class="token plain">:7007 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_on_volume_for_daemon_config:/root/.ceramic/daemon.config.json </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_on_volume_for_ceramic_logs:/root/.ceramic/logs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_on_volume_for_ceramic_statestore:/root/.ceramic/statestore </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">NODE_ENV</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">production </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name js-ceramic </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ceramicnetwork/js-ceramic:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 使用这段代码让状态存储保持在 S3 中</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> run -d </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -p </span><span class="token number" style="color:#36acaa">7007</span><span class="token plain">:7007 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_for_daemon_config:/root/.ceramic/daemon.config.json </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v /path_for_ceramic_logs:/root/.ceramic/logs </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">NODE_ENV</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">production </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">AWS_ACCESS_KEY_ID</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">s3_access_key_id </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e </span><span class="token assign-left variable" style="color:#36acaa">AWS_SECRET_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">s3_secret_access_key </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name js-ceramic </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ceramicnetwork/js-ceramic:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="不使用容器"><strong>不使用容器</strong><a class="hash-link" href="#不使用容器" title="标题的直接链接">​</a></h3><p>安装完成后，两个守护进程 (ipfs 和 ceramic) 可以分别用下面的命令启动：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ipfs init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ipfs daemon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在启动 Ceramic 守护进程前，先配置其使用 IPFS &quot;远程&quot; 模式。 请参考下方的 <a href="#example-daemonconfigjson">示例 daemon.config.json</a>。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ceramic daemon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例-daemonconfigjson"><strong>示例 daemon.config.json</strong><a class="hash-link" href="#示例-daemonconfigjson" title="标题的直接链接">​</a></h3><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;anchor&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;ethereum-rpc-url&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://eg_infura_endpoint&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 为避免用量限制，将其替换为一个 Ethereum RPC 端点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;http-api&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;cors-allowed-origins&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;.*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;ipfs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;mode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;remote&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://ipfs_ip_address:5001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;logger&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;log-level&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 0 最 verbose (输出最多的 log)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;log-to-files&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;network&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mainnet&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 连接到 mainnet, testnet-clay, 或 dev-unstable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;node&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;state-store&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;mode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;s3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;s3-bucket&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bucket_name&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>对状态存储，如果使用卷 (volume storage) 而不是 S3:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token property" style="color:#36acaa">&quot;state-store&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;mode&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;local-directory&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/path_for_ceramic_statestore&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 默认为 $HOME/.ceramic/statestore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="示例-aws-s3-策略"><strong>示例 AWS S3 策略</strong><a class="hash-link" href="#示例-aws-s3-策略" title="标题的直接链接">​</a></h3><p>IPFS AWS S3 policy for the access key</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2012-10-17&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Statement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:GetObject&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:ListBucket&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:PutObject&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:DeleteObject&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Effect&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Allow&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Resource&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;ipfs_bucket_arn&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ipfs_bucket_arn/*&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>信息</div><div class="admonitionContent_S0QG"><p>  在纯 go-ipfs (vanilla go-ipfs) 中，<a href="https://github.com/3box/go-ds-s3" target="_blank" rel="noopener noreferrer">S3 数据存储</a> 不是开箱即用的。为了以最小配置来使用它，请使用 3Box Labs 的 <a href="https://github.com/ceramicnetwork/go-ipfs-daemon" target="_blank" rel="noopener noreferrer">go-ipfs-daemon</a>。</p></div></div><p>Ceramic state store AWS S3 policy for the access key</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2012-10-17&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;Statement&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Action&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:ListBucket&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:GetObject&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:PutObject&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;s3:DeleteObject&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Effect&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Allow&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;Resource&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;state_store_bucket_arn&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;state_store_bucket_arn/*&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="连接到-ceramic-网络"><strong>连接到 Ceramic 网络</strong><a class="hash-link" href="#连接到-ceramic-网络" title="标题的直接链接">​</a></h2><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="连接到-ceramic"><strong>连接到 Ceramic</strong><a class="hash-link" href="#连接到-ceramic" title="标题的直接链接">​</a></h3><p>Ceramic 守护进程提供一个 HTTP API ，客户使用它与你的 Ceramic 节点进行交互。默认的API端口是<code>7007</code>。确保这个端口对你计划用于你的应用程序的所有客户端是可用的。</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>  Healthchecks can be run against the API endpoint <code>/api/v0/node/healthcheck</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="保持与-ipfs-的连接"><strong>保持与 IPFS 的连接</strong><a class="hash-link" href="#保持与-ipfs-的连接" title="标题的直接链接">​</a></h3><p>Ceramic 节点依靠 IPFS 进行组网。IPFS节点使用名为 &quot;switch&quot;（又名 &quot;swarm&quot;）的 Libp2p 模块相互连接。这个模块运作在 websocket 上，默认端口为<code>4011</code>。websocket 端口必须可以访问互联网，这样你的 Ceramic 节点才可以连接到网络上。</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>  Healthchecks can be run against the <code>HEALTHCHECK_PORT</code> (port <code>8011</code> by default) when <code>HEALTHCHECK_ENABLED</code> is <code>true</code>.</p></div></div><p>此外，运行 IPFS 时，IPFS 的 API 端口必须能被 Ceramic 节点访问。默认的API端口是<code>5001</code>。然后通过 Ceramic 守护进程配置文件中的 ipfs.host 选项将 IPFS 节点的地址传递给 Ceramic。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="连接到主网锚点服务"><strong>连接到主网锚点服务</strong><a class="hash-link" href="#连接到主网锚点服务" title="标题的直接链接">​</a></h3><p>对于希望连接到 Ceramic 主网的节点，该节点的IP地址必须被添加到由 3BoxLabs 运营的 Ceramic 锚点服务节点的允许列表 (allowlist) 中。一旦你用本指南完全配置了你的 Ceramic 节点，并有办法持久化它的配置和状态，请在<a href="https://github.com/3box/ceramic-anchor-allowlist" target="_blank" rel="noopener noreferrer">Ceramic Anchor Allowlist Repo</a> 中创建一个 issue，提供你的 Ceramic 节点的公共静态<em>出口</em> IP 地址，并简要描述对多地址 (multiaddress)、 Ceramic 状态存储和 IPFS Repo 的数据持久性设置。一旦你的 issue 被关闭，你将能够连接到 Ceramic 网络和 Ceramic 锚点服务。</p><p>希望连接到其他 Ceramic 网络的节点，如 Clay 测试网，不需要做任何特别的事情来获得 Ceramic 锚点服务的访问。<code>testnet-clay</code>网络的锚点服务对所有人开放，不像主网服务那样有一个 IP 允许列表。</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>  主网节点在启动后不会立即运行，直到你的拉取请求被审核、你的IP地址被添加到 3Box Labs 托管锚点服务的允许列表中。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="可观测性"><strong>可观测性</strong><a class="hash-link" href="#可观测性" title="标题的直接链接">​</a></h2><hr><p>Ceramic 有一个调试模式，你可以用<code>--debug</code>标志启用。这将允许你看到打印到控制台的所有日志，包括调试日志、API请求、事件和错误。</p><p>为了便于观察，最好将这些日志写入文件，以调试可能出现的问题并生成指标。写入记录文件可以通过 <code>logger.log-to-files</code> 配置文件选项启用。日志的默认位置是<code>~/.ceramic/logs</code>，但这个路径可通过 <code>logger.log-directory</code> 配置文件选项来配置。即使没有启用调试模式，您仍然可以将关键日志和指标写入文件。</p><p>请求和事件日志使用 <a href="https://brandur.org/logfmt" target="_blank" rel="noopener noreferrer">logfmt</a> 编写。这使得它们很容易使用像<a href="https://grafana.com/docs/loki/latest/clients/promtail/" target="_blank" rel="noopener noreferrer">Promtail</a>这样的日志搜刮代理和像 <a href="https://grafana.com/docs/loki/latest/" target="_blank" rel="noopener noreferrer">Loki</a> 这样的日志聚合器导入 <a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a> 仪表盘，后者可作为 Grafana 的数据源。示例设置可以在<a href="https://github.com/3box/ceramic-stats" target="_blank" rel="noopener noreferrer">这里</a>找到。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="下一步"><strong>下一步</strong><a class="hash-link" href="#下一步" title="标题的直接链接">​</a></h2><hr><p>祝贺！您现在已经在云端建立了一个连接良好的 Ceramic 节点，它可以接收来自本地环境、<a href="/ceramic-docs-zh/build/javascript/installation.md/#js-http-client">JS HTTP 客户端</a>的 HTTP 请求，或者简单地作为另一个节点来复制和钉住流。如果遇到任何 bug, 请在 <a href="https://github.com/ceramicnetwork/js-ceramic" target="_blank" rel="noopener noreferrer">JS Ceramic GitHub</a>上提出 issue。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/ceramic-docs-zh/run/installation/"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">在开发环境运行节点</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ceramic-docs-zh/category/博客文章翻译/"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">博客文章翻译</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#谁应该运行-cearmic-节点" class="table-of-contents__link toc-highlight"><strong>谁应该运行 Cearmic 节点？</strong></a></li><li><a href="#需要知道的事情" class="table-of-contents__link toc-highlight"><strong>需要知道的事情</strong></a></li><li><a href="#所需步骤" class="table-of-contents__link toc-highlight"><strong>所需步骤</strong></a></li><li><a href="#快速开始" class="table-of-contents__link toc-highlight"><strong>快速开始</strong></a><ul><li><a href="#在-aws-ecs-上使用-terraform-运行-ceramic-" class="table-of-contents__link toc-highlight"><strong>在 AWS ECS 上使用 Terraform 运行 Ceramic →</strong></a></li></ul></li><li><a href="#运行守护进程" class="table-of-contents__link toc-highlight"><strong>运行守护进程</strong></a><ul><li><a href="#在-docker-容器中运行" class="table-of-contents__link toc-highlight"><strong>在 Docker 容器中运行</strong></a></li><li><a href="#在容器外运行" class="table-of-contents__link toc-highlight"><strong>在容器外运行</strong></a></li></ul></li><li><a href="#数据持久性" class="table-of-contents__link toc-highlight"><strong>数据持久性</strong></a></li><li><a href="#示例" class="table-of-contents__link toc-highlight"><strong>示例</strong></a><ul><li><a href="#使用-docker-容器" class="table-of-contents__link toc-highlight"><strong>使用 Docker 容器</strong></a></li><li><a href="#不使用容器" class="table-of-contents__link toc-highlight"><strong>不使用容器</strong></a></li><li><a href="#示例-daemonconfigjson" class="table-of-contents__link toc-highlight"><strong>示例 daemon.config.json</strong></a></li><li><a href="#示例-aws-s3-策略" class="table-of-contents__link toc-highlight"><strong>示例 AWS S3 策略</strong></a></li></ul></li><li><a href="#连接到-ceramic-网络" class="table-of-contents__link toc-highlight"><strong>连接到 Ceramic 网络</strong></a><ul><li><a href="#连接到-ceramic" class="table-of-contents__link toc-highlight"><strong>连接到 Ceramic</strong></a></li><li><a href="#保持与-ipfs-的连接" class="table-of-contents__link toc-highlight"><strong>保持与 IPFS 的连接</strong></a></li><li><a href="#连接到主网锚点服务" class="table-of-contents__link toc-highlight"><strong>连接到主网锚点服务</strong></a></li></ul></li><li><a href="#可观测性" class="table-of-contents__link toc-highlight"><strong>可观测性</strong></a></li><li><a href="#下一步" class="table-of-contents__link toc-highlight"><strong>下一步</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ceramic-docs-zh/learn/welcome/">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chat.ceramic.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ceramicnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.ceramic.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ceramicnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCgCLq5dx7sX-yUrrEbtYqVw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube Channel<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with ❤️ by Ceramic Chinese Community</div></div></div></footer></div>
<script src="/ceramic-docs-zh/assets/js/runtime~main.fac2329c.js"></script>
<script src="/ceramic-docs-zh/assets/js/main.53676837.js"></script>
</body>
</html>